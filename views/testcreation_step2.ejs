<html>
<head>
		<script>
            let Qno = -1;
		</script>

		<title>Test Creation</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.4.0/css/bootstrap4-toggle.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.4.0/js/bootstrap4-toggle.min.js"></script>
	<link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="tags/tagsinput.css">

   <!--Custom css -->
        <link rel="stylesheet" href="assets/css/style.css">

        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        
        <!--Font awesome icons-->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
        
        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

        <!-- Popper JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script> 
</head>
<body onload="addbox();getLangs()">
<!--Navigation bar-->
      <nav class="navbar navbar-expand-sm bg-primary navbar-dark " >
        <a class="navbar-brand" href="/"><img src="logo.png" height="50px;"/></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
          <span class="navbar-toggler-icon"></span>
        </button>
          <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
				<li class="nav-item">
				<a class="nav-link" href="/logout">Logout</a>
				</li>
			</ul>
          </div>  
      </nav>
<center>
<h1 style="margin:20px; color:red;">Pop Quiz</h1>
<div id="BigBox" style="margin-top:10px;">
</div>
<button class="btn btn-warning" onclick="addbox()" style="color:white; font-weight:bold; margin-bottom:10px;"/>Add New Question<i class="fa fa-plus" aria-hidden="true" style="margin-left:5px; color:white;"></i></button>
    </center>
        <script>
            function getLangs()
            { 
                let url = "https://api.judge0.com/languages"
                let langs = [];
                fetch(url) // Call the fetch function passing the url of the API as a parameter
                .then(function(response) {
                    return response.json();
                })
                .then(function(myJson) {
                    myJson.forEach(element => {
                        console.log(element)
                        langs.push(element.name);
                    });
                })
                .then(()=>{
                    let lang_lists = document.getElementById("CL");
                langs.forEach((element)=>{
                    let O = document.createElement("option");
                    O.value = element;
                    O.textContent = element;
                    lang_lists.appendChild(O);
                })
                });                
            }
            function CodeIt(id)
            {
                document.getElementById(`extra_options${id}`).style.display = "none";
                document.getElementById(`options${id}`).style.display = "none";
                document.getElementById(`codeBox${id}`).style.display = "";
            }
            function Uncodeit(id)
            {
                document.getElementById(`codeBox${id}`).style.display = "none";
                document.getElementById(`extra_options${id}`).style.display = "";
                document.getElementById(`options${id}`).style.display = "";
            }
           function opsf(id)
           {
               if(document.getElementById(`2o${id}`).selected)
               {
                   Uncodeit(id)
                   document.getElementById(`extra_options${id}`).style.display = "none";
               }
               else if(document.getElementById("4o"+id).selected)
               {
                   Uncodeit(id)
                   document.getElementById(`extra_options${id}`).style.display = "";
               }
               else if(document.getElementById("code_"+id).selected)
               {
                CodeIt(id)
               }
           }
           function addbox()
           {
               Qno++;
               let selectid= "opselect"+Qno;
               let functioncall ="opsf("+Qno+")";
               let op2 = "2o"+Qno;
               let op4 = "4o"+Qno;
               let codeop = "code_"+Qno;
               let codeBox = "codeBox"+Qno;
               let options = "options"+Qno
               let options2 ="extra_options"+Qno;
               let card = `  <div class="card text-white  mb-3" style="padding:5px; width: 70%; min-width:350px;height: auto; align-self: center ; border:0px; background:#4FC3F7; ">
				 <button  class="btn btn-warning"  onclick="this.parentElement.remove();" style=" width: 200px; font-weight:bold; border-width:0px; color:white;">Remove X</button>
		<div class="card-header" style="background:#4FC3F7; border:0px solid white;"><select  id = ${selectid} class="form-control" onchange=${functioncall}>
            <option value="4" id= ${op4} selected>4-options</option>
            <option value="2" id= ${op2}>2-options</option>
            <option valude="C" id = ${codeop}>Coding Question</option>
        </select></div>
        
        <div class="card-body" style="background:#4FC3F7; border-color:#4FC3F7; border:0px solid white;">
            <div class="input-group mb-3">
                
                <textarea name = "question" class="form-control" placeholder="Write the Question here..."></textarea>
            </div>
            <div id = "${options}">
                <div class="input-group mb-3" style="width:48%; float:left; margin:1%;">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input type="checkbox" name="ACorrect" aria-label="Checkbox for following text input">
                            <b style="margin-left: 5px ">A</b>
                        </div>
                    </div>
                    <input type="text" class="form-control" placeholder="Option A">
                </div>
                <div class="input-group mb-3" style="width:48%; float:left; margin:1%;">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input type="checkbox" name="BCorrect" aria-label="Checkbox for following text input">
                            <b style="margin-left: 5px">B</b>
                        </div>
                    </div>
                    <input type="text" class="form-control" placeholder="Option B">
                </div>
        </div>
            <div id = "${options2}">
                <div class="input-group mb-3" style="width:48%; float:left; margin:1%;">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input type="checkbox" name="CCorrect" aria-label="Checkbox for following text input">
                            <b style="margin-left: 5px">C</b>
                        </div>
                    </div>
                    <input type="text" class="form-control" placeholder="Option C">
                </div>
                <div class="input-group mb-3" style="width:48%; float:left; margin:1%;">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input type="checkbox" name="DCorrect" aria-label="Checkbox for following text input">
                            <b style="margin-left: 5px">D</b>
                        </div>
                    </div>
                    <input type="text" class="form-control" placeholder="Option D">
                </div>
            </div>
            <div id = ${codeBox} style="display: none"> 
                <textarea type="text" name = "input" class="form-control" placeholder="Input for the Problem...."></textarea>
                <br>
                
                <select id = "CL" class = "form-control">
                    <option selected>Select the programming Language you want to allow for this question</option>
                </select>
                <br>
                <textarea type="text" name = "output" class="form-control" placeholder="Expected output...."></textarea>
        </div>
    </div>
</div>`;
               let  div = document.createElement("div");
               div.setAttribute("id", "question"+Qno);
               div.innerHTML = card;
               document.getElementById("BigBox").appendChild(div);
           }
        </script>
</body>
</html>
